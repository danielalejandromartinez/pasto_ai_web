{% extends "base.html" %}
{% block title %}Nuestra SoluciÃ³n en AcciÃ³n - Pasto.AI{% endblock %}
{% block content %}
<main class="presentation-container">
    <section class="presentation-slide" id="slide-problema">
        <div class="slide-content">
            <h2 class="section-title" id="problema-title"></h2>
            <div class="problemas-container">
                <div class="problema-card"><h3></h3><p></p></div>
                <div class="problema-card"><h3></h3><p></p></div>
                <div class="problema-card"><h3></h3><p></p></div>
            </div>
        </div>
    </section>
    <section class="presentation-slide is-hidden" id="slide-solucion">
        <div class="slide-content">
            <h2 class="section-title" id="solucion-title"></h2>
            <div class="agent-showcase-grid">
                <div class="agent-showcase-card"><div class="agent-icon">ğŸ©º</div><h3></h3><p></p><a href="/agente/asistente-post-operatorio" class="card-link"></a></div>
                <div class="agent-showcase-card"><div class="agent-icon">ğŸ—“ï¸</div><h3></h3><p></p><a href="/agente/agente-de-agendamiento-inteligente" class="card-link coming-soon-link"></a></div>
                <div class="agent-showcase-card"><div class="agent-icon">ğŸ¯</div><h3></h3><p></p><a href="/agente/agente-calificador-de-candidatos" class="card-link coming-soon-link"></a></div>
            </div>
        </div>
    </section>
</main>

<script>
    document.addEventListener('DOMContentLoaded', async function() {
        // --- CONTENIDO ---
        const problemaTitleText = "Â¿Su prÃ¡ctica profesional se siente asÃ­?";
        const problemas = [
            { el: document.querySelector('#slide-problema .problema-card:nth-child(1)'), title: 'Horas Perdidas en CoordinaciÃ³n', text: 'Su equipo invierte incontables horas en agendar citas, enviar recordatorios y filtrar pacientes curiosos.' },
            { el: document.querySelector('#slide-problema .problema-card:nth-child(2)'), title: 'Pacientes que No se Presentan', text: 'Cada cita cancelada a Ãºltimo minuto es un hueco en su agenda y una pÃ©rdida directa de ingresos.' },
            { el: document.querySelector('#slide-problema .problema-card:nth-child(3)'), title: 'Seguimiento Post-Procedimiento CaÃ³tico', text: 'El monitoreo manual de la evoluciÃ³n de decenas de pacientes es propenso a errores y consume tiempo valioso.' }
        ];
        const solucionTitleText = "Soluciones de IA para los Retos de su PrÃ¡ctica";
        const soluciones = [
            { el: document.querySelector('#slide-solucion .agent-showcase-card:nth-child(1)'), title: 'Seguimiento de Pacientes Automatizado', text: 'Libera a tu equipo de las preguntas repetitivas...', link: 'Ver Detalles â†’' },
            { el: document.querySelector('#slide-solucion .agent-showcase-card:nth-child(2)'), title: 'GestiÃ³n de Agenda Inteligente', text: 'Reduce las ausencias (no-shows) con recordatorios automÃ¡ticos...', link: 'PrÃ³ximamente...' },
            { el: document.querySelector('#slide-solucion .agent-showcase-card:nth-child(3)'), title: 'RecepciÃ³n y Filtro Virtual', text: 'Califica a los visitantes de tu sitio web...', link: 'PrÃ³ximamente...' }
        ];

        // --- ELEMENTOS ---
        const problemaTitle = document.getElementById('problema-title');
        const solucionTitle = document.getElementById('solucion-title');
        const slideProblema = document.getElementById('slide-problema');
        const slideSolucion = document.getElementById('slide-solucion');

        // --- FUNCIONES ---
        const wait = ms => new Promise(res => setTimeout(res, ms));

        function typeWriter(element, text) {
            return new Promise(resolve => {
                let i = 0;
                element.innerHTML = '';
                function type() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, 55); // <-- VELOCIDAD MÃS LENTA
                    } else {
                        resolve();
                    }
                }
                type();
            });
        }

        // --- ORQUESTADOR ---
        async function startPresentation() {
            // --- ESCENA 1: PROBLEMAS ---
            await typeWriter(problemaTitle, problemaTitleText);
            await wait(500);

            // Bucle FOR...OF secuencial garantizado
            for (const problema of problemas) {
                problema.el.classList.add('visible');
                await wait(300);
                await typeWriter(problema.el.querySelector('h3'), problema.title);
                await typeWriter(problema.el.querySelector('p'), problema.text);
                await wait(1000);
            }
            await wait(2000);

            // --- TRANSICIÃ“N ---
            slideProblema.classList.add('is-hidden');
            slideSolucion.classList.remove('is-hidden');
            await wait(500);

            // --- ESCENA 2: SOLUCIONES ---
            await typeWriter(solucionTitle, solucionTitleText);
            await wait(500);
            
            for (const solucion of soluciones) {
                solucion.el.classList.add('visible');
                await wait(300);
                await typeWriter(solucion.el.querySelector('h3'), solucion.title);
                await typeWriter(solucion.el.querySelector('p'), solucion.text);
                await typeWriter(solucion.el.querySelector('a'), solucion.link);
                await wait(1000);
            }
        }

        startPresentation();
    });
</script>
{% endblock %}